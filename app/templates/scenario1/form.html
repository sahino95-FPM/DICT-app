{% extends "layouts/base.html" %}

{% block title %}ModÃ¨le 1 - Recherche montants exÃ©cutÃ©s{% endblock %}

{% block breadcrumb %}
<nav class="breadcrumb">
    <a href="{{ url_for('main.dashboard') }}">Dashboard</a>
    <span class="separator">â€º</span>
    <a href="{{ url_for('main.scenarios_list') }}">ModÃ¨les</a>
    <span class="separator">â€º</span>
    <span class="current">ModÃ¨le 1</span>
</nav>
{% endblock %}

{% block content %}
<div class="scenario-form-page">
    <h2 class="page-title">ModÃ¨le 1: Recherche des montants exÃ©cutÃ©s</h2>
    <p class="page-description">
        Obtenez la synthÃ¨se des actes exÃ©cutÃ©s (nombre et montant total) regroupÃ©s par structure,
        dossier et/ou date d'exÃ©cution avec filtres dynamiques et exports.
    </p>

    <form method="POST" action="{{ url_for('scenario1.results') }}" class="form-container">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <!-- PÃ©riode de soins -->
        <div class="form-section">
            <h3 class="form-section-title">ğŸ“… PÃ©riode de soins</h3>
            <p class="form-help">DÃ©limite la plage temporelle des actes Ã  inclure</p>

            <div class="form-row">
                <div class="form-group">
                    <label for="date_debut" class="required">Date de dÃ©but</label>
                    <input type="date" id="date_debut" name="date_debut" class="form-control"
                           value="{{ defaults.date_debut }}" required>
                </div>

                <div class="form-group">
                    <label for="date_fin" class="required">Date de fin</label>
                    <input type="date" id="date_fin" name="date_fin" class="form-control"
                           value="{{ defaults.date_fin }}" required>
                </div>
            </div>
        </div>

        <!-- Plage de montants -->
        <div class="form-section">
            <h3 class="form-section-title">ğŸ’° Plage de montants</h3>
            <p class="form-help">Filtre sur le montant exÃ©cutÃ© par acte (FCFA)</p>

            <div class="form-row">
                <div class="form-group">
                    <label for="montant_min">Montant minimum</label>
                    <input type="number" id="montant_min" name="montant_min" class="form-control"
                           value="{{ defaults.montant_min }}" min="0" step="100">
                </div>

                <div class="form-group">
                    <label for="montant_max">Montant maximum</label>
                    <input type="number" id="montant_max" name="montant_max" class="form-control"
                           value="{{ defaults.montant_max }}" min="0" step="100">
                </div>
            </div>
        </div>

        <!-- Regroupement -->
        <div class="form-section">
            <h3 class="form-section-title">ğŸ“Š Regrouper les rÃ©sultats par</h3>
            <p class="form-help">SÃ©lectionnez au moins un critÃ¨re de regroupement</p>

            <div class="form-checkboxes">
                <div class="form-checkbox">
                    <input type="checkbox" id="group_by_structure" name="group_by_structure"
                           {% if defaults.group_by_structure %}checked{% endif %}>
                    <label for="group_by_structure">Structure exÃ©cutante</label>
                </div>

                <div class="form-checkbox">
                    <input type="checkbox" id="group_by_pec" name="group_by_pec"
                           {% if defaults.group_by_pec %}checked{% endif %}>
                    <label for="group_by_pec">NumÃ©ro de dossier (PEC)</label>
                </div>

                <div class="form-checkbox">
                    <input type="checkbox" id="group_by_date" name="group_by_date"
                           {% if defaults.group_by_date %}checked{% endif %}>
                    <label for="group_by_date">Date d'exÃ©cution</label>
                </div>
            </div>
        </div>

        <!-- Options avancÃ©es -->
        <div class="form-section">
            <h3 class="form-section-title">âš™ï¸ Options avancÃ©es</h3>

            <div class="form-checkboxes">
                <div class="form-checkbox">
                    <input type="checkbox" id="show_details" name="show_details"
                           {% if defaults.show_details %}checked{% endif %}>
                    <label for="show_details">ğŸ§® Afficher le dÃ©tail des actes</label>
                </div>

                <div class="form-checkbox">
                    <input type="checkbox" id="show_sql" name="show_sql"
                           {% if defaults.show_sql %}checked{% endif %}>
                    <label for="show_sql">ğŸ§‘â€ğŸ’» Afficher la requÃªte SQL gÃ©nÃ©rÃ©e</label>
                </div>
            </div>

            <div class="form-group">
                <label for="limit">â±ï¸ Limiter le nombre de rÃ©sultats</label>
                <input type="number" id="limit" name="limit" class="form-control"
                       value="{{ defaults.limit }}" min="50" max="5000" step="50">
                <span class="form-help-inline">Entre 50 et 5000 rÃ©sultats</span>
            </div>
        </div>

        <!-- Boutons d'action -->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-lg">
                ğŸ” ExÃ©cuter la recherche
            </button>
            <button type="reset" class="btn btn-secondary">
                ğŸ”„ RÃ©initialiser
            </button>
        </div>
    </form>
</div>
{% endblock %}
